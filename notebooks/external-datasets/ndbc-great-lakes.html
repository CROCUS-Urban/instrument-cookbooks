
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>National Data Buoy Center (NDBC) Data &#8212; CROCUS Instrument Cookbooks</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script async="async" kind="hypothesis" src="https://hypothes.is/embed.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'notebooks/external-datasets/ndbc-great-lakes';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Read Data from a Vaisala WXT536" href="../crocus_level1_node/vaisala_wxt536.html" />
    <link rel="prev" title="Plot Station Maps Combining CROCUS and NOAA Data" href="../quicklooks/surface-map.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../README.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/CROCUS_Logo.svg" class="logo__image only-light" alt="CROCUS Instrument Cookbooks - Home"/>
    <script>document.write(`<img src="../../_static/CROCUS_Logo.svg" class="logo__image only-dark" alt="CROCUS Instrument Cookbooks - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../README.html">
                    CROCUS Instrument Cookbooks
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Data Access</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../data-access.html">Data Access</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Contributing</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../notebook-template.html">CROCUS Notebook Template</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Quick Looks (Recent Data)</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../quicklooks/air-quality.html">Air Quality Quicklooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quicklooks/ceilometer.html">Ceilometer Quicklooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quicklooks/current-weather.html">Current Weather Quicklooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quicklooks/surface-map.html">Plot Station Maps Combining CROCUS and NOAA Data</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">External Datasets</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">National Data Buoy Center (NDBC) Data</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">CROCUS Level 1 Node</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../crocus_level1_node/vaisala_wxt536.html">Read Data from a Vaisala WXT536</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Ambient Weather Stations</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../ambient-weather/read-ambient-data.html">Read, Process, and Visualize Ambient Weather Station Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ambient-weather/visualize-past-obs.html">Visualize Latest Observations from the Ambient Weather Stations</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Doppler Lidar</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../doppler-lidar/Working-With-Ingested-CROCS-Data.html">Working With Data From The CROCUS Doppler LIDAR Deployed During AGES+</a></li>

<li class="toctree-l1"><a class="reference internal" href="../doppler-lidar/read-doppler-lidar.html">Read Data from the Doppler Lidar</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Micro Rain Radar</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../mrr/Crocus-Thredds-Cookbook.html"><strong>L</strong>oading <strong>A</strong>nd <strong>V</strong>isualizing mrr dat<strong>A</strong> (LAVA)</a></li>



</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Case Study</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../case-study/lake-breeze-ci.html">CROCUS Lake Breeze (May 7th, 2023)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../case-study/pneumonia-front.html">Pneumonia Front (May 16, 2023)</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://binder.projectpythia.org/v2/gh/CROCUS-Urban/instrument-cookbooks/main?urlpath=lab/tree/notebooks/notebooks/external-datasets/ndbc-great-lakes.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Binder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Binder logo" src="../../_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
      
      
      
      <li><a href="https://jupyter-open.olcf.ornl.gov/hub/user-redirect/git-pull?repo=https%3A//github.com/CROCUS-Urban/instrument-cookbooks&urlpath=lab/tree/instrument-cookbooks/notebooks/notebooks/external-datasets/ndbc-great-lakes.ipynb&branch=main" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on JupyterHub"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="JupyterHub logo" src="../../_static/images/logo_jupyterhub.svg">
  </span>
<span class="btn__text-container">JupyterHub</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/notebooks/external-datasets/ndbc-great-lakes.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>National Data Buoy Center (NDBC) Data</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#southern-lake-michigan-buoys">Southern Lake Michigan Buoys</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exploring-the-ndbc-with-python">Exploring the NDBC with Python</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#active-stations">Active stations</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Southern Lake Michigan Buoys</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#realtime-meteorological-data">Realtime Meteorological Data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#realtime-data-for-the-harrison-dever-crib-chii2">Realtime data for the Harrison-Dever Crib (CHII2)</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#historial-ndbc-data">Historial NDBC Data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#python-apis-for-the-ndbc">Python APIs for the NDBC</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="national-data-buoy-center-ndbc-data">
<h1>National Data Buoy Center (NDBC) Data<a class="headerlink" href="#national-data-buoy-center-ndbc-data" title="Link to this heading">#</a></h1>
<p>This notebook introduces National Data Buoy Center (NDBC) data with a focus on buoys in Southern Lake Michigan.</p>
<blockquote>
<div><p><a class="reference external" href="https://www.ndbc.noaa.gov/faq/ndbc.shtml">The mission of NOAA’s NDBC is to collect and disseminate in-situ, real-time, quality-controlled observations in the marine environment to ensure the Nation’s maritime safety, and to understand and predict the atmosphere, ocean, waves, ice, and climate.</a></p>
</div></blockquote>
<p>The NDBC provides both station metadata and station measurements. NDBC data, guides and documentation can be found on the NDBC web site.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.ndbc.noaa.gov/">National Data Buoy Center</a></p></li>
<li><p><a class="reference external" href="https://www.ndbc.noaa.gov/docs/ndbc_web_data_guide.pdf">NDBC Web Data Guide</a></p></li>
<li><p><a class="reference external" href="https://www.ndbc.noaa.gov/faq/measdes.shtml">Measurement Description and Units</a></p></li>
<li><p><a class="reference external" href="https://www.ndbc.noaa.gov/to_station.shtml">Station List</a></p></li>
<li><p><a class="reference external" href="https://www.ndbc.noaa.gov/data/realtime2/">Realtime data from the last 45 days</a></p></li>
<li><p><a class="reference external" href="https://www.ndbc.noaa.gov/historical_data.shtml">Historical Data</a></p></li>
</ul>
<p>The Standard Meteorological data includes:</p>
<ul class="simple">
<li><p><em>WDIR</em>   Wind direction</p></li>
<li><p><em>WSPD</em>   Wind speed (m/s) averaged over an eight-minute period for buoys and a two-minute period for land stations.</p></li>
<li><p><em>GWS</em>   Peak 5 or 8 second wind gusts speed (m/s).</p></li>
<li><p><em>WVHT</em>   Significant wave height (m)</p></li>
<li><p><em>DPD</em>   Dominant wave period (s)</p></li>
<li><p><em>APD</em>   Average wave period (s)</p></li>
<li><p><em>PRES</em>   Sea level pressure (hPa)</p></li>
<li><p><em>ATMP</em>   Air temperature (Celsius)</p></li>
<li><p><em>WTMP</em>   Water temperature (Celsius)</p></li>
<li><p><em>DEWP</em>   Dewpoint</p></li>
</ul>
<p>Solar Radiation data may include:</p>
<ul class="simple">
<li><p><em>SRAD1</em>   Shortwave Radiation,
<a class="reference external" href="https://www.licor.com/env/products/light/pyranometer.html">LI-COR LI-200 pyronometer sensor</a>, <span class="math notranslate nohighlight">\(0.4\)</span>-<span class="math notranslate nohighlight">\(1.1~\mu{\rm m}\)</span> ``solar’’ (<span class="math notranslate nohighlight">\({\rm W}/{\rm m}^2\)</span>)</p></li>
<li><p><em>SWRAD</em>   Shortwave Radiation,
<a class="reference external" href="https://www.sikuliaq.alaska.edu/ops/pdf/Eppley_PSP_and_PIR_datasheets.pdf">Eppley Precision Spectral Pyranometer (PSP)</a>, <span class="math notranslate nohighlight">\(0.285\)</span>-<span class="math notranslate nohighlight">\(2.8~\mu{\rm m}\)</span> ``solar’’ (<span class="math notranslate nohighlight">\({\rm W}/{\rm m}^2\)</span>)</p></li>
<li><p><em>LWRAD</em>   Longwave Radiation,
<a class="reference external" href="http://www.eppleylab.com/wp-content/uploads/pdf/EPPLEY160919-PIR.pdf">Eppley Precision Infrared Radiometer (PIR)</a>, IR from the Earth and atmosphere, <span class="math notranslate nohighlight">\(4\)</span>-<span class="math notranslate nohighlight">\(50~\mu{\rm m}\)</span>  (<span class="math notranslate nohighlight">\({\rm W}/{\rm m}^2\)</span>)</p></li>
</ul>
<p>See the <a class="reference external" href="https://www.ndbc.noaa.gov/faq/measdes.shtml">Measurement Description and Units</a> link for more information.</p>
<p>The NDBC web interface (https://www.ndbc.noaa.gov/) which is linked in the image below, is a convenient way to identify stations.</p>
<p><a class="reference external" href="https://www.ndbc.noaa.gov"><img alt="NDC Screenshot" src="../../_images/ndbc_screenshot.png" /></a></p>
<section id="southern-lake-michigan-buoys">
<h2>Southern Lake Michigan Buoys<a class="headerlink" href="#southern-lake-michigan-buoys" title="Link to this heading">#</a></h2>
<p>This list of Southern Lake Michigan Buoys was fine-tuned using the NDBC web interface above , five of these stations appear to be deactivated. The <em>five digit station identifiers</em> below are needed for API calls to return station data.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Identifier</p></th>
<th class="head"><p>Name/Location</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Owner</p></th>
<th class="head"><p>Measurements</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>KNSW3</strong></p></td>
<td><p>Kenosha Light, Kenosha, WI</p></td>
<td><p>fixed</p></td>
<td><p>NWS</p></td>
<td><p>WDIR, WSPD, GST, PRES, ATMP</p></td>
</tr>
<tr class="row-odd"><td><p>45187</p></td>
<td><p>Winthrop Harbor</p></td>
<td><p>buoy</p></td>
<td><p>UIUC</p></td>
<td><p>WDIR, WSPD, GST, WVHT, MWD, ATMP, WTMP</p></td>
</tr>
<tr class="row-even"><td><p>45186</p></td>
<td><p>Waukegan Buoy</p></td>
<td><p>buoy</p></td>
<td><p>UIUC</p></td>
<td><p>WDIR, WSPD, GST, WVHT, DPD, ATMP, WTMP</p></td>
</tr>
<tr class="row-odd"><td><p><strong>WHRI2</strong></p></td>
<td><p>Waukegan Harbor, IL</p></td>
<td><p>fixed</p></td>
<td><p>NWS</p></td>
<td><p>WDIR, WSPD, GST, ATMP</p></td>
</tr>
<tr class="row-even"><td><p>45174</p></td>
<td><p>Wilmette Buoy</p></td>
<td><p>buoy</p></td>
<td><p>IL-IN Sea Grant</p></td>
<td><p>WDIR, WSPD, GST, WVHT, DPD, MWD, PRES, ATMP, WTMP, DEWP: ~~SRAD1~~</p></td>
</tr>
<tr class="row-odd"><td><p>~~FSTI2~~</p></td>
<td><p>~~Foster Ave, Chicago, IL~~</p></td>
<td><p>fixed</p></td>
<td><p>~~CPD~~</p></td>
<td><p>ATMP data ends in 2021</p></td>
</tr>
<tr class="row-even"><td><p><strong>OKSI2</strong></p></td>
<td><p>Oak St., Chicago, IL</p></td>
<td><p>fixed</p></td>
<td><p>CPD</p></td>
<td><p>WDIR, WSPD, GST, ATMP: SRAD1</p></td>
</tr>
<tr class="row-odd"><td><p><strong>CHII2</strong></p></td>
<td><p>Harrison-Dever Crib, Chicago, IL</p></td>
<td><p>fixed</p></td>
<td><p>GLERL</p></td>
<td><p>WDIR, WSPD, GST, ATMP, DEWP</p></td>
</tr>
<tr class="row-even"><td><p>~~45177~~</p></td>
<td><p>~~Ohio St. Beach, Chicago, IL~~</p></td>
<td><p>buoy</p></td>
<td><p>~~CPD~~</p></td>
<td><p>WVHT, DPD, WTMP, last data 2019</p></td>
</tr>
<tr class="row-odd"><td><p>45198</p></td>
<td><p>Chicago Buoy</p></td>
<td><p>buoy</p></td>
<td><p>IN-IL Sea Grant</p></td>
<td><p>WDIR, WSPD, GST, WVHT, DPD, WMD, WTMP</p></td>
</tr>
<tr class="row-even"><td><p><strong>CNII2</strong></p></td>
<td><p>Northerly Isle, IL</p></td>
<td><p>fixed</p></td>
<td><p>NWS</p></td>
<td><p>WDIR, WSPD, GST, ATMP, DEWP</p></td>
</tr>
<tr class="row-odd"><td><p>~~JAKI2~~</p></td>
<td><p>~~63rd St. Chicago, IL~~</p></td>
<td><p>fixed</p></td>
<td><p>~~CPD~~</p></td>
<td><p>data ends in 2022</p></td>
</tr>
<tr class="row-even"><td><p><strong>CMTI2</strong></p></td>
<td><p>Caulument Harbor, IL</p></td>
<td><p>fixed</p></td>
<td><p>NOAA</p></td>
<td><p>WDIR, WSPD, GST, PRES, ATMP, DEWP</p></td>
</tr>
<tr class="row-odd"><td><p><strong>BHRI3</strong></p></td>
<td><p>Burns Harbor, IN</p></td>
<td><p>fixed</p></td>
<td><p>NWS</p></td>
<td><p>WDIR, WSPD, GST, PRES, ATMP</p></td>
</tr>
<tr class="row-even"><td><p>45170</p></td>
<td><p>Michigan City Buoy, IN</p></td>
<td><p>buoy</p></td>
<td><p>IL-IN Sea Grant</p></td>
<td><p>WDIR, WSPD, GST, WVHT, DPD, WMD, PRES, ATMP, DEWP: SRAD1</p></td>
</tr>
<tr class="row-odd"><td><p>MCYI3</p></td>
<td><p>Michigan City Harbor Entrance</p></td>
<td><p>fixed</p></td>
<td><p>GLERL</p></td>
<td><p>WDIR, WSPD, GST, PRES, ATMP, DEWP</p></td>
</tr>
<tr class="row-even"><td><p>~~<strong>18CI3</strong>~~</p></td>
<td><p>~~Michigan City CG Station~~</p></td>
<td><p>fixed</p></td>
<td><p>~~USCG~~</p></td>
<td><p>last data 2015</p></td>
</tr>
<tr class="row-odd"><td><p>45026</p></td>
<td><p>Cook Nuclear Plant Buoy, Stevensville, MI</p></td>
<td><p>buoy</p></td>
<td><p>Limno Tech</p></td>
<td><p>WDIR, WSPD, GST, WVHT, DPD, WMD, PRES, ATMP, WTMP, DEWP: ~~SRAD1~~</p></td>
</tr>
<tr class="row-even"><td><p>~~20CM4~~</p></td>
<td><p>~~ST. Joseph CG Station, MI~~</p></td>
<td><p>fixed</p></td>
<td><p>~~USCG~~</p></td>
<td><p>last data 2015</p></td>
</tr>
<tr class="row-odd"><td><p><strong>SJOM4</strong></p></td>
<td><p>St. Joseph, MI</p></td>
<td><p>fixed</p></td>
<td><p>NWS</p></td>
<td><p>WDIR, WSPD, GST, PRES, ATMP</p></td>
</tr>
<tr class="row-even"><td><p>45168</p></td>
<td><p>South Haven Buoy, MI</p></td>
<td><p>buoy</p></td>
<td><p>Limno Tech</p></td>
<td><p>WDIR, WSPD, GST, WVHT, DPD, WMD, WTMP,DEWP</p></td>
</tr>
<tr class="row-odd"><td><p><em>SVNM4</em></p></td>
<td><p>South Haven Light, MI</p></td>
<td><p>fixed</p></td>
<td><p>GLERL</p></td>
<td><p>WDIR, WSPD, GST, ATMP</p></td>
</tr>
</tbody>
</table>
</div>
<p>Station’s with IDs in <strong>boldface</strong> collect data all year. This most of the <em>fixed</em> station.</p>
</section>
<section id="exploring-the-ndbc-with-python">
<h2>Exploring the NDBC with Python<a class="headerlink" href="#exploring-the-ndbc-with-python" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import standard python libraries</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>            <span class="c1"># Numerical Python: scientific </span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>           <span class="c1"># tabular data and timeseries package</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">dt</span> 
</pre></div>
</div>
</div>
</div>
<section id="active-stations">
<h3>Active stations<a class="headerlink" href="#active-stations" title="Link to this heading">#</a></h3>
<p>Import a list of <em>active</em> stations directly from the NDBC as a Data Frame.  NB, the <em>five digit station identifiers</em> in this list are lower case.  The <a class="reference external" href="https://www.ndbc.noaa.gov/obs.shtml">NBDC search engine</a>
is not case sensitive, but various NDBC filenames use both lower and uppercase station IDs.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">active_st</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_xml</span><span class="p">(</span><span class="n">path_or_buffer</span><span class="o">=</span><span class="s2">&quot;https://www.ndbc.noaa.gov/activestations.xml&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">active_st</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(1347, 13)
</pre></div>
</div>
</div>
</div>
<section id="id1">
<h4>Southern Lake Michigan Buoys<a class="headerlink" href="#id1" title="Link to this heading">#</a></h4>
<p>Create a subset of South Lake Michigan buoys based on a geographical bounding box.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mask</span> <span class="o">=</span> <span class="p">((</span><span class="n">active_st</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">41.5</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">active_st</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">42.6</span><span class="p">)</span>  <span class="o">&amp;</span> <span class="p">(</span><span class="n">active_st</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mf">84.7</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">active_st</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">88</span><span class="p">))</span>
<span class="n">slm_buoys</span> <span class="o">=</span> <span class="n">active_st</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">slm_buoys</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="c1">#display(slm_buoys)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(22, 13)
</pre></div>
</div>
</div>
</div>
<p>The code below removes columns which are not relevant for Lake Michigan. By inspection, some of the stations on the “active” list have not collected data in recent years, the code block below also removes those stattions.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">slm_buoys</span> <span class="o">=</span> <span class="n">slm_buoys</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;seq&#39;</span><span class="p">,</span><span class="s1">&#39;dart&#39;</span><span class="p">,</span><span class="s1">&#39;waterquality&#39;</span><span class="p">,</span><span class="s1">&#39;currents&#39;</span><span class="p">,</span><span class="s1">&#39;pgm&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="n">slm_buoys</span> <span class="o">=</span> <span class="p">(</span><span class="n">slm_buoys</span><span class="p">[(</span><span class="n">slm_buoys</span><span class="o">.</span><span class="n">id</span> <span class="o">!=</span> <span class="s2">&quot;FSTI2&quot;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">slm_buoys</span><span class="o">.</span><span class="n">id</span> <span class="o">!=</span> <span class="s2">&quot;fsti2&quot;</span><span class="p">)])</span> <span class="c1">#  Data collection ended in 2021</span>
<span class="n">slm_buoys</span> <span class="o">=</span> <span class="n">slm_buoys</span><span class="p">[</span><span class="n">slm_buoys</span><span class="o">.</span><span class="n">id</span> <span class="o">!=</span> <span class="s2">&quot;45177&quot;</span> <span class="p">]</span>                                <span class="c1">#  Data collection ended in 2019</span>
<span class="n">slm_buoys</span> <span class="o">=</span> <span class="n">slm_buoys</span><span class="p">[(</span><span class="n">slm_buoys</span><span class="o">.</span><span class="n">id</span> <span class="o">!=</span> <span class="s2">&quot;JAKI2&quot;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">slm_buoys</span><span class="o">.</span><span class="n">id</span> <span class="o">!=</span> <span class="s2">&quot;jaki2&quot;</span><span class="p">)</span> <span class="p">]</span>  <span class="c1">#  Data collection ended in 2022</span>
<span class="n">slm_buoys</span> <span class="o">=</span> <span class="n">slm_buoys</span><span class="p">[(</span><span class="n">slm_buoys</span><span class="o">.</span><span class="n">id</span> <span class="o">!=</span> <span class="s2">&quot;18CI3&quot;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">slm_buoys</span><span class="o">.</span><span class="n">id</span> <span class="o">!=</span> <span class="s2">&quot;18ci3&quot;</span><span class="p">)</span> <span class="p">]</span>  <span class="c1">#  Data collection ended in 2015</span>
<span class="n">slm_buoys</span> <span class="o">=</span> <span class="n">slm_buoys</span><span class="p">[(</span><span class="n">slm_buoys</span><span class="o">.</span><span class="n">id</span> <span class="o">!=</span> <span class="s2">&quot;20CM4&quot;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">slm_buoys</span><span class="o">.</span><span class="n">id</span> <span class="o">!=</span> <span class="s2">&quot;20cm4&quot;</span><span class="p">)]</span>   <span class="c1">#  Data collection ended in 2015</span>
<span class="n">slm_buoys</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">inplace</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">slm_buoys</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">slm_buoys</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">slm_buoys</span><span class="p">)</span>

<span class="n">slm_buoys</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;slm_buoys.txt&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="n">station_list</span> <span class="o">=</span> <span class="n">slm_buoys</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">station_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(17, 9)
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>index</th>
      <th>id</th>
      <th>lat</th>
      <th>lon</th>
      <th>elev</th>
      <th>name</th>
      <th>owner</th>
      <th>type</th>
      <th>met</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>259</td>
      <td>45026</td>
      <td>41.982</td>
      <td>-86.619</td>
      <td>176.0</td>
      <td>Cook Nuclear Plant Buoy, Stevensville, MI</td>
      <td>Limno Tech</td>
      <td>buoy</td>
      <td>y</td>
    </tr>
    <tr>
      <th>1</th>
      <td>289</td>
      <td>45168</td>
      <td>42.397</td>
      <td>-86.331</td>
      <td>177.0</td>
      <td>South Haven Buoy, MI</td>
      <td>Limno Tech</td>
      <td>buoy</td>
      <td>y</td>
    </tr>
    <tr>
      <th>2</th>
      <td>290</td>
      <td>45170</td>
      <td>41.755</td>
      <td>-86.968</td>
      <td>177.0</td>
      <td>Michigan City Buoy, IN</td>
      <td>Illinois-Indiana Sea Grant and Purdue Civil En...</td>
      <td>buoy</td>
      <td>n</td>
    </tr>
    <tr>
      <th>3</th>
      <td>294</td>
      <td>45174</td>
      <td>42.135</td>
      <td>-87.655</td>
      <td>176.0</td>
      <td>Wilmette Buoy, IL</td>
      <td>Illinois-Indiana Sea Grant</td>
      <td>buoy</td>
      <td>n</td>
    </tr>
    <tr>
      <th>4</th>
      <td>302</td>
      <td>45186</td>
      <td>42.368</td>
      <td>-87.795</td>
      <td>176.0</td>
      <td>Waukegan Buoy, IL</td>
      <td>University of Illinois at Urbana-Champaign</td>
      <td>buoy</td>
      <td>n</td>
    </tr>
    <tr>
      <th>5</th>
      <td>303</td>
      <td>45187</td>
      <td>42.491</td>
      <td>-87.779</td>
      <td>176.0</td>
      <td>Winthrop Harbor Buoy, IL</td>
      <td>University of Illinois at Urbana-Champaign</td>
      <td>buoy</td>
      <td>n</td>
    </tr>
    <tr>
      <th>6</th>
      <td>308</td>
      <td>45198</td>
      <td>41.892</td>
      <td>-87.563</td>
      <td>176.0</td>
      <td>Chicago Buoy</td>
      <td>Illinois-Indiana Sea Grant and Purdue Civil En...</td>
      <td>buoy</td>
      <td>n</td>
    </tr>
    <tr>
      <th>7</th>
      <td>657</td>
      <td>bhri3</td>
      <td>41.646</td>
      <td>-87.147</td>
      <td>180.0</td>
      <td>Burns Harbor, IN</td>
      <td>NWS Central Region</td>
      <td>fixed</td>
      <td>y</td>
    </tr>
    <tr>
      <th>8</th>
      <td>708</td>
      <td>chii2</td>
      <td>41.916</td>
      <td>-87.572</td>
      <td>176.0</td>
      <td>Harrison-Dever Crib, Chicago, IL</td>
      <td>GLERL</td>
      <td>fixed</td>
      <td>y</td>
    </tr>
    <tr>
      <th>9</th>
      <td>723</td>
      <td>cmti2</td>
      <td>41.730</td>
      <td>-87.538</td>
      <td>178.5</td>
      <td>9087044 - Calumet Harbor, IL</td>
      <td>NOS</td>
      <td>fixed</td>
      <td>y</td>
    </tr>
    <tr>
      <th>10</th>
      <td>726</td>
      <td>cnii2</td>
      <td>41.856</td>
      <td>-87.609</td>
      <td>180.0</td>
      <td>Northerly Isle, IL</td>
      <td>NWS Central Region</td>
      <td>fixed</td>
      <td>y</td>
    </tr>
    <tr>
      <th>11</th>
      <td>917</td>
      <td>knsw3</td>
      <td>42.589</td>
      <td>-87.809</td>
      <td>176.0</td>
      <td>Kenosha Light, Kenosha, WI</td>
      <td>NWS Central Region</td>
      <td>fixed</td>
      <td>n</td>
    </tr>
    <tr>
      <th>12</th>
      <td>988</td>
      <td>mcyi3</td>
      <td>41.729</td>
      <td>-86.912</td>
      <td>176.0</td>
      <td>Michigan City Harbor Entrance Light, Michigan ...</td>
      <td>GLERL</td>
      <td>fixed</td>
      <td>y</td>
    </tr>
    <tr>
      <th>13</th>
      <td>1075</td>
      <td>oksi2</td>
      <td>41.912</td>
      <td>-87.624</td>
      <td>179.0</td>
      <td>Oak St., Chicago, IL</td>
      <td>Chicago Park District</td>
      <td>fixed</td>
      <td>y</td>
    </tr>
    <tr>
      <th>14</th>
      <td>1219</td>
      <td>sjom4</td>
      <td>42.098</td>
      <td>-86.494</td>
      <td>182.0</td>
      <td>St. Joseph, MI</td>
      <td>NWS Central Region</td>
      <td>fixed</td>
      <td>n</td>
    </tr>
    <tr>
      <th>15</th>
      <td>1247</td>
      <td>svnm4</td>
      <td>42.401</td>
      <td>-86.288</td>
      <td>176.0</td>
      <td>South Haven Light, South Haven, MI</td>
      <td>GLERL</td>
      <td>fixed</td>
      <td>n</td>
    </tr>
    <tr>
      <th>16</th>
      <td>1323</td>
      <td>whri2</td>
      <td>42.361</td>
      <td>-87.813</td>
      <td>180.0</td>
      <td>Waukegan Harbor, IL</td>
      <td>NWS Central Region</td>
      <td>fixed</td>
      <td>y</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;45026&#39;, &#39;45168&#39;, &#39;45170&#39;, &#39;45174&#39;, &#39;45186&#39;, &#39;45187&#39;, &#39;45198&#39;, &#39;bhri3&#39;, &#39;chii2&#39;, &#39;cmti2&#39;, &#39;cnii2&#39;, &#39;knsw3&#39;, &#39;mcyi3&#39;, &#39;oksi2&#39;, &#39;sjom4&#39;, &#39;svnm4&#39;, &#39;whri2&#39;]
</pre></div>
</div>
</div>
</div>
<p>met: indicates whether the station has reported meteorological data in the past eight hours (y/n). Mosy buoy’s are recovered for winter and won’t report meteorological data in winter montsh.</p>
</section>
</section>
</section>
<section id="realtime-meteorological-data">
<h2>Realtime Meteorological Data<a class="headerlink" href="#realtime-meteorological-data" title="Link to this heading">#</a></h2>
<p>NDBC has separate file and directory structures for historic and realtime data (from the last 45 days). In particular,  filenames for historic data use lower case station IDs while reatime data use upper case station IDs.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a function to fetch and wrangle realtime data. Stdmet data is saved under the .txt extension.</span>

<span class="k">def</span><span class="w"> </span><span class="nf">get_rt_data</span><span class="p">(</span><span class="n">stationid</span><span class="p">):</span>
    
    <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://www.ndbc.noaa.gov/data/realtime2/&#39;</span> <span class="o">+</span> <span class="n">stationid</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;.txt&#39;</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">sep</span> <span class="o">=</span> <span class="s2">&quot;\s+&quot;</span><span class="p">)</span>

    <span class="c1"># Wrangle the Buoy Data</span>
    <span class="n">units</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    
    <span class="c1"># Set the column types</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;#YY&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;#YY&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;MM&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;MM&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;DD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;DD&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;hh&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;hh&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;mm&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;mm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;WDIR&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;WDIR&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;WDIR&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;WSPD&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;WSPD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;WSPD&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;GST&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;GST&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;GST&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;WVHT&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;WVHT&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;WVHT&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;DPD&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;DPD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;DPD&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;APD&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;APD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;APD&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;MWD&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;MWD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;MWD&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;PRES&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;PRES&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;PRES&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;ATMP&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;ATMP&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;ATMP&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;WTMP&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;WTMP&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;WTMP&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;DEWP&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;DEWP&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;DEWP&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;VIS&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;VIS&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;VIS&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;TIDE&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;TIDE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;TIDE&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;PTDY&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;PTDY&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;PTDY&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>

    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;datetime&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;#YY&#39;</span><span class="p">],</span> <span class="n">month</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">MM</span><span class="p">,</span>  <span class="n">day</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">DD</span><span class="p">,</span> <span class="n">hour</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">hh</span><span class="p">,</span> <span class="n">minute</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">mm</span><span class="p">))</span>
    <span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<section id="realtime-data-for-the-harrison-dever-crib-chii2">
<h3>Realtime data for the Harrison-Dever Crib (CHII2)<a class="headerlink" href="#realtime-data-for-the-harrison-dever-crib-chii2" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">StationID</span> <span class="o">=</span> <span class="s1">&#39;CHII2&#39;</span>
<span class="n">rtdf</span> <span class="o">=</span> <span class="n">get_rt_data</span><span class="p">(</span><span class="n">StationID</span><span class="p">)</span>
<span class="n">StationName</span> <span class="o">=</span> <span class="n">slm_buoys</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">slm_buoys</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">StationID</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">StationName</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">rtdf</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Harrison-Dever Crib, Chicago, IL
                      #YY  MM  DD  hh  mm   WDIR  WSPD  GST  WVHT  DPD  APD  \
datetime                                                                      
2025-04-08 15:00:00  2025   4   8  15   0  350.0   4.1  4.6   NaN  NaN  NaN   
2025-04-08 14:50:00  2025   4   8  14  50  350.0   1.5  3.1   NaN  NaN  NaN   
2025-04-08 14:40:00  2025   4   8  14  40  340.0   3.1  4.1   NaN  NaN  NaN   
2025-04-08 14:30:00  2025   4   8  14  30  340.0   3.1  3.6   NaN  NaN  NaN   
2025-04-08 14:20:00  2025   4   8  14  20  320.0   4.6  5.1   NaN  NaN  NaN   

                     MWD  PRES  ATMP  WTMP  DEWP  VIS  PTDY  TIDE  
datetime                                                           
2025-04-08 15:00:00  NaN   NaN  -0.3   NaN  -8.2  NaN   NaN   NaN  
2025-04-08 14:50:00  NaN   NaN  -0.3   NaN  -8.1  NaN   NaN   NaN  
2025-04-08 14:40:00  NaN   NaN  -0.4   NaN  -7.9  NaN   NaN   NaN  
2025-04-08 14:30:00  NaN   NaN  -0.5   NaN  -7.4  NaN   NaN   NaN  
2025-04-08 14:20:00  NaN   NaN  -0.4   NaN  -7.7  NaN   NaN   NaN  
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.colors</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">mcolors</span>

<span class="n">pad</span> <span class="o">=</span> <span class="mf">1.05</span>
<span class="n">my_ytick_labels</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;N&#39;</span><span class="p">,</span><span class="s1">&#39;E&#39;</span><span class="p">,</span><span class="s1">&#39;S&#39;</span><span class="p">,</span><span class="s1">&#39;W&#39;</span><span class="p">,</span><span class="s1">&#39;N&#39;</span><span class="p">]</span>

<span class="n">fig</span><span class="p">,</span> <span class="p">(</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">,</span> <span class="n">ax3</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>
<span class="c1">#fig.suptitle(StationName,y=0.99)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">StationName</span> <span class="o">+</span> <span class="s2">&quot; (&quot;</span> <span class="o">+</span> <span class="n">StationID</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>

<span class="n">ax1b</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
<span class="n">ax2b</span> <span class="o">=</span> <span class="n">ax2</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
<span class="n">ax3b</span> <span class="o">=</span> <span class="n">ax3</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>

<span class="n">ax1</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">axis</span><span class="p">([</span><span class="n">rtdf</span><span class="o">.</span><span class="n">first_valid_index</span><span class="p">(),</span><span class="n">rtdf</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">(),</span><span class="mi">0</span><span class="p">,</span><span class="mi">360</span><span class="p">])</span>
<span class="n">major_angle_ticks</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">361</span><span class="p">,</span><span class="mi">90</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="n">major_angle_ticks</span><span class="p">)</span>
<span class="n">ax1b</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="n">major_angle_ticks</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rtdf</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">rtdf</span><span class="p">[</span><span class="s1">&#39;WDIR&#39;</span><span class="p">],</span> 
         <span class="n">color</span><span class="o">=</span><span class="s1">&#39;indigo&#39;</span><span class="p">,</span>
         <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">,</span>
         <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span>
         <span class="n">markersize</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
         <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Wind Direction&#39;</span><span class="p">)</span>
<span class="n">ax1b</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="n">ticks</span><span class="o">=</span><span class="n">major_angle_ticks</span><span class="p">,</span><span class="n">labels</span><span class="o">=</span><span class="n">my_ytick_labels</span><span class="p">)</span>
<span class="c1">#ax1.set_xlabel(&#39;Time (UTC)&#39;)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Wind Direction Timeseries&#39;</span><span class="p">)</span>

<span class="c1"># Wind speed, gust, direction</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">axis</span><span class="p">([</span><span class="n">rtdf</span><span class="o">.</span><span class="n">first_valid_index</span><span class="p">(),</span><span class="n">rtdf</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">(),</span><span class="mi">0</span><span class="p">,</span><span class="n">rtdf</span><span class="p">[</span><span class="s1">&#39;GST&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()])</span>
<span class="n">ax2b</span><span class="o">.</span><span class="n">axis</span><span class="p">([</span><span class="n">rtdf</span><span class="o">.</span><span class="n">first_valid_index</span><span class="p">(),</span><span class="n">rtdf</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">(),</span><span class="mi">0</span><span class="p">,</span><span class="mf">1.9438</span><span class="o">*</span><span class="n">rtdf</span><span class="p">[</span><span class="s1">&#39;GST&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()])</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rtdf</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">rtdf</span><span class="p">[</span><span class="s1">&#39;GST&#39;</span><span class="p">],</span> 
         <span class="n">color</span><span class="o">=</span><span class="s1">&#39;saddlebrown&#39;</span><span class="p">,</span>  
         <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
         <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span>
         <span class="n">label</span><span class="o">=</span><span class="s1">&#39;GST&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rtdf</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">rtdf</span><span class="p">[</span><span class="s1">&#39;WSPD&#39;</span><span class="p">],</span> 
         <span class="n">color</span><span class="o">=</span><span class="s1">&#39;darkorange&#39;</span><span class="p">,</span>
          <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
          <span class="n">label</span><span class="o">=</span><span class="s1">&#39;WSPD&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Wind Speed [m/s]&#39;</span><span class="p">)</span>
<span class="n">ax2b</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Wind Speed [kn]&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper right&#39;</span><span class="p">)</span>

<span class="c1"># Temperature</span>

<span class="n">ax3</span><span class="o">.</span><span class="n">axis</span><span class="p">([</span><span class="n">rtdf</span><span class="o">.</span><span class="n">first_valid_index</span><span class="p">(),</span><span class="n">rtdf</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">(),</span><span class="n">rtdf</span><span class="p">[</span><span class="s1">&#39;DEWP&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span><span class="n">rtdf</span><span class="p">[</span><span class="s1">&#39;ATMP&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">+</span><span class="mi">5</span><span class="o">/</span><span class="mi">9</span><span class="p">])</span>
<span class="n">ax3b</span><span class="o">.</span><span class="n">axis</span><span class="p">([</span><span class="n">rtdf</span><span class="o">.</span><span class="n">first_valid_index</span><span class="p">(),</span><span class="n">rtdf</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">(),</span><span class="n">rtdf</span><span class="p">[</span><span class="s1">&#39;DEWP&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">*</span><span class="mi">9</span><span class="o">/</span><span class="mi">5</span><span class="o">+</span><span class="mi">32</span><span class="p">,</span><span class="mi">9</span><span class="o">*</span><span class="n">rtdf</span><span class="p">[</span><span class="s1">&#39;ATMP&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">/</span><span class="mi">5</span> <span class="o">+</span><span class="mi">32</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rtdf</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">rtdf</span><span class="p">[</span><span class="s1">&#39;DEWP&#39;</span><span class="p">],</span>  
         <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
         <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span>
         <span class="n">label</span><span class="o">=</span><span class="s1">&#39;DEWP&#39;</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rtdf</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">rtdf</span><span class="p">[</span><span class="s1">&#39;ATMP&#39;</span><span class="p">],</span> 
         <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>
         <span class="n">color</span><span class="o">=</span><span class="s1">&#39;cornflowerblue&#39;</span><span class="p">,</span>
         <span class="n">label</span><span class="o">=</span><span class="s1">&#39;ATMP&#39;</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Temperature [degC]&#39;</span><span class="p">)</span>
<span class="n">ax3b</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Temperature [degF]&#39;</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper right&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;realtime.pdf&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/e39028b9b44c1482853d98d78a1dc52ebaaea6dfca6d758224936715d58194c5.png" src="../../_images/e39028b9b44c1482853d98d78a1dc52ebaaea6dfca6d758224936715d58194c5.png" />
</div>
</div>
<p>Distribution of Wind Speeds</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="n">bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">stop</span><span class="o">=</span><span class="n">rtdf</span><span class="p">[</span><span class="s2">&quot;GST&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span><span class="n">num</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>  <span class="c1"># return evenly spaced numbers over an interval</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">rtdf</span><span class="p">[</span><span class="s2">&quot;GST&quot;</span><span class="p">],</span><span class="n">bins</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Gusts&quot;</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;orange&#39;</span><span class="p">,</span><span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;darkorange&#39;</span><span class="p">,</span><span class="n">align</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">rtdf</span><span class="p">[</span><span class="s2">&quot;WSPD&quot;</span><span class="p">],</span><span class="n">bins</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Wind Speed&quot;</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span><span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;darkblue&#39;</span><span class="p">,</span><span class="n">align</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper right&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Speed (m/s)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Frequency&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Frequency of Wind Speeds (&#39;</span> <span class="o">+</span> <span class="n">StationID</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/ce7321d4440041adef80ed9e0485c4cd12b14b22646267122b37bd70feb0c7d4.png" src="../../_images/ce7321d4440041adef80ed9e0485c4cd12b14b22646267122b37bd70feb0c7d4.png" />
</div>
</div>
<p>Get data from nearby stations for comparison</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">StationID2</span> <span class="o">=</span> <span class="s1">&#39;OKSI2&#39;</span>
<span class="n">StationID3</span> <span class="o">=</span> <span class="s1">&#39;CNII2&#39;</span>

<span class="n">StationName2</span> <span class="o">=</span> <span class="n">slm_buoys</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">slm_buoys</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">StationID2</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">StationName3</span> <span class="o">=</span> <span class="n">slm_buoys</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">slm_buoys</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">StationID3</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="n">station2_df</span> <span class="o">=</span> <span class="n">get_rt_data</span><span class="p">(</span><span class="s1">&#39;OKSI2&#39;</span><span class="p">)</span>
<span class="n">station3_df</span> <span class="o">=</span> <span class="n">get_rt_data</span><span class="p">(</span><span class="s1">&#39;CNII2&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The windroses below show a prominent windshadow for the Oak St. station.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">windrose</span><span class="w"> </span><span class="kn">import</span> <span class="n">WindroseAxes</span>

<span class="n">fig</span><span class="p">,</span> <span class="p">(</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">,</span> <span class="n">ax3</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">subplot_kw</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;projection&#39;</span><span class="p">:</span> <span class="s1">&#39;windrose&#39;</span><span class="p">})</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">&quot;Windroses from Three Nearby Stations&quot;</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="mf">1.1</span><span class="p">)</span>

<span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">(</span><span class="n">ax1</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">rtdf</span><span class="p">[</span><span class="s2">&quot;WDIR&quot;</span><span class="p">],</span> <span class="n">rtdf</span><span class="p">[</span><span class="s1">&#39;WSPD&#39;</span><span class="p">],</span> <span class="n">normed</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">opening</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_legend</span><span class="p">(</span><span class="n">units</span><span class="o">=</span><span class="s2">&quot;m/s&quot;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">StationName</span> <span class="o">+</span> <span class="s2">&quot; (&quot;</span> <span class="o">+</span> <span class="n">StationID</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="mf">1.1</span><span class="p">)</span>

<span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">(</span><span class="n">ax2</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">station2_df</span><span class="p">[</span><span class="s2">&quot;WDIR&quot;</span><span class="p">],</span> <span class="n">station2_df</span><span class="p">[</span><span class="s1">&#39;WSPD&#39;</span><span class="p">],</span> <span class="n">normed</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">opening</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_legend</span><span class="p">(</span><span class="n">units</span><span class="o">=</span><span class="s2">&quot;m/s&quot;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">StationName2</span> <span class="o">+</span> <span class="s2">&quot; (&quot;</span> <span class="o">+</span> <span class="n">StationID2</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="mf">1.1</span><span class="p">)</span>

<span class="c1">#ax3 = WindroseAxes.from_ax()</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">station3_df</span><span class="p">[</span><span class="s2">&quot;WDIR&quot;</span><span class="p">],</span> <span class="n">station3_df</span><span class="p">[</span><span class="s1">&#39;WSPD&#39;</span><span class="p">],</span> <span class="n">normed</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">opening</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">set_legend</span><span class="p">(</span><span class="n">units</span><span class="o">=</span><span class="s2">&quot;m/s&quot;</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">StationName3</span> <span class="o">+</span> <span class="s2">&quot; (&quot;</span> <span class="o">+</span> <span class="n">StationID3</span> <span class="o">+</span><span class="s2">&quot;)&quot;</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="mf">1.1</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/84903ad1fb301e5a1347416c3647a9fce9ac1bd4234f92c0f5c99b03dd61381b.png" src="../../_images/84903ad1fb301e5a1347416c3647a9fce9ac1bd4234f92c0f5c99b03dd61381b.png" />
</div>
</div>
</section>
</section>
<section id="historial-ndbc-data">
<h2>Historial NDBC Data<a class="headerlink" href="#historial-ndbc-data" title="Link to this heading">#</a></h2>
<p>The top level directory or historical ndbc data is https://www.ndbc.noaa.gov/data/historical/.
Standard meteoroligical data (smet) if found in the directory https://www.ndbc.noaa.gov/data/historical/stdmet/, while standard radiation data is found in https://www.ndbc.noaa.gov/data/historical/srad/</p>
<p>Unlike reatime data, the filenames for historic data contain station IDs in lower case. The data is stored in separate files for each year.</p>
<p>https://www.ndbc.noaa.gov/view_text_file.php?filename=chii2h2023.txt.gz&amp;dir=data/historical/stdmet/
https://www.ndbc.noaa.gov/data/historical/stdmet/chii2h2023.txt.gz</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">get_hdata</span><span class="p">(</span><span class="n">station</span><span class="p">,</span><span class="n">year</span><span class="p">):</span>

    <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://www.ndbc.noaa.gov/data/historical/stdmet/&#39;</span> <span class="o">+</span> <span class="n">station</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;h&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">year</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.txt.gz&#39;</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">sep</span> <span class="o">=</span> <span class="s2">&quot;\s+&quot;</span><span class="p">,</span><span class="n">compression</span><span class="o">=</span><span class="s1">&#39;gzip&#39;</span><span class="p">,</span><span class="n">low_memory</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="c1"># Wrangle the Buoy Data</span>
    <span class="n">units</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1"># Set the column types</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;#YY&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;#YY&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;MM&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;MM&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;DD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;DD&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;hh&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;hh&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;mm&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;mm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;WDIR&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;WDIR&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;WDIR&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;WSPD&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;WSPD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;WSPD&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;GST&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;GST&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;GST&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;WVHT&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;WVHT&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;WVHT&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;DPD&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;DPD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;DPD&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;APD&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;APD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;APD&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;MWD&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;MWD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;MWD&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;PRES&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;PRES&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;PRES&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;ATMP&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;ATMP&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;ATMP&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;WTMP&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;WTMP&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;WTMP&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;DEWP&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;DEWP&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;DEWP&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;VIS&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;VIS&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;VIS&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;TIDE&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;TIDE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;TIDE&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;PTDY&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;PTDY&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;PTDY&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>

    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;datetime&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;#YY&#39;</span><span class="p">],</span> <span class="n">month</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">MM</span><span class="p">,</span>  <span class="n">day</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">DD</span><span class="p">,</span> <span class="n">hour</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">hh</span><span class="p">,</span> <span class="n">minute</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">mm</span><span class="p">))</span>
    <span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># NDBC uses these numeric values to indicate no data was taken</span>
    
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;WVHT&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;WVHT&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">({</span><span class="mf">99.00</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">})</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;DPD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;DPD&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">({</span><span class="mf">99.00</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">})</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;APD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;APD&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">({</span><span class="mf">99.00</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">})</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;MWD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;MWD&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">({</span><span class="mi">999</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">})</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;PRES&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;PRES&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">({</span><span class="mf">9999.0</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">})</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;WTMP&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;WTMP&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">({</span><span class="mf">999.0</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">})</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;VIS&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;VIS&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">({</span><span class="mf">99.0</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">})</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;TIDE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;TIDE&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">({</span><span class="mf">99.0</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">})</span>
    
    <span class="k">return</span> <span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">get_hdata</span><span class="p">(</span><span class="s1">&#39;45174&#39;</span><span class="p">,</span><span class="mi">2023</span><span class="p">)</span> <span class="c1"># Wilmette Buoy</span>
<span class="n">StationName</span> <span class="o">=</span> <span class="n">slm_buoys</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">slm_buoys</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;45174&#39;</span><span class="p">,</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">StationName</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Wilmette Buoy, IL
                      #YY  MM  DD  hh  mm  WDIR  WSPD   GST  WVHT   DPD  APD  \
datetime                                                                       
2023-05-01 00:00:00  2023   5   1   0   0   291   8.4  11.3  0.65  3.04  NaN   
2023-05-01 00:10:00  2023   5   1   0  10   293   8.4  11.1  0.70  3.06  NaN   
2023-05-01 00:20:00  2023   5   1   0  20   295   8.1  11.2  0.75  3.12  NaN   
2023-05-01 00:30:00  2023   5   1   0  30   299   7.6   9.3  0.77  3.12  NaN   
2023-05-01 00:40:00  2023   5   1   0  40   294   7.4  10.6  0.76  3.14  NaN   

                       MWD   PRES  ATMP  WTMP  DEWP  VIS  TIDE  
datetime                                                        
2023-05-01 00:00:00  326.0  995.6   6.1   6.8   2.9  NaN   NaN  
2023-05-01 00:10:00  328.0  995.7   6.1   6.8   4.0  NaN   NaN  
2023-05-01 00:20:00  322.0  995.7   6.1   6.8   3.2  NaN   NaN  
2023-05-01 00:30:00  179.0  995.7   6.0   6.8   3.4  NaN   NaN  
2023-05-01 00:40:00  335.0  995.7   5.9   6.8   3.4  NaN   NaN  
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.colors</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">mcolors</span>

<span class="n">pad</span> <span class="o">=</span> <span class="mf">1.05</span>
<span class="n">my_ytick_labels</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;N&#39;</span><span class="p">,</span><span class="s1">&#39;E&#39;</span><span class="p">,</span><span class="s1">&#39;S&#39;</span><span class="p">,</span><span class="s1">&#39;W&#39;</span><span class="p">,</span><span class="s1">&#39;N&#39;</span><span class="p">]</span>

<span class="n">fig</span><span class="p">,</span> <span class="p">(</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">,</span> <span class="n">ax3</span><span class="p">,</span> <span class="n">ax4</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="n">constrained_layout</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">StationName</span> <span class="o">+</span> <span class="s2">&quot; (45174)&quot;</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="mf">1.02</span><span class="p">)</span>

<span class="n">ax1b</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
<span class="n">ax2b</span> <span class="o">=</span> <span class="n">ax2</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
<span class="n">ax3b</span> <span class="o">=</span> <span class="n">ax3</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
<span class="n">ax4b</span> <span class="o">=</span> <span class="n">ax4</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>

<span class="n">ax1</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">axis</span><span class="p">([</span><span class="n">df</span><span class="o">.</span><span class="n">first_valid_index</span><span class="p">(),</span><span class="n">df</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">(),</span><span class="mi">0</span><span class="p">,</span><span class="mi">360</span><span class="p">])</span>
<span class="n">major_angle_ticks</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">361</span><span class="p">,</span><span class="mi">90</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="n">major_angle_ticks</span><span class="p">)</span>
<span class="n">ax1b</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="n">major_angle_ticks</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;WDIR&#39;</span><span class="p">],</span> 
         <span class="n">color</span><span class="o">=</span><span class="s1">&#39;indigo&#39;</span><span class="p">,</span>
         <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">,</span>
         <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span>
         <span class="n">markersize</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
         <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Wind Direction&#39;</span><span class="p">)</span>
<span class="n">ax1b</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="n">ticks</span><span class="o">=</span><span class="n">major_angle_ticks</span><span class="p">,</span><span class="n">labels</span><span class="o">=</span><span class="n">my_ytick_labels</span><span class="p">)</span>
<span class="c1">#ax1.set_xlabel(&#39;Time (UTC)&#39;)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Wind Direction Timeseries&#39;</span><span class="p">)</span>

<span class="c1"># Wind speed, gust, direction</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">axis</span><span class="p">([</span><span class="n">df</span><span class="o">.</span><span class="n">first_valid_index</span><span class="p">(),</span><span class="n">df</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">(),</span><span class="mi">0</span><span class="p">,</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;GST&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()])</span>
<span class="n">ax2b</span><span class="o">.</span><span class="n">axis</span><span class="p">([</span><span class="n">df</span><span class="o">.</span><span class="n">first_valid_index</span><span class="p">(),</span><span class="n">df</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">(),</span><span class="mi">0</span><span class="p">,</span><span class="mf">1.9438</span><span class="o">*</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;GST&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()])</span>

<span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;GST&#39;</span><span class="p">],</span> 
         <span class="n">color</span><span class="o">=</span><span class="s1">&#39;saddlebrown&#39;</span><span class="p">,</span>  
         <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
         <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span>
         <span class="n">label</span><span class="o">=</span><span class="s1">&#39;GST&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;WSPD&#39;</span><span class="p">],</span> 
         <span class="n">color</span><span class="o">=</span><span class="s1">&#39;darkorange&#39;</span><span class="p">,</span>
          <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
          <span class="n">label</span><span class="o">=</span><span class="s1">&#39;WSPD&#39;</span><span class="p">)</span>

<span class="n">ax2</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Windspeed and Gusts&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Wind Speed [m/s]&#39;</span><span class="p">)</span>
<span class="n">ax2b</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Wind Speed [kn]&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper right&#39;</span><span class="p">)</span>


<span class="c1"># Water temperature</span>

<span class="n">ax3</span><span class="o">.</span><span class="n">axis</span><span class="p">([</span><span class="n">df</span><span class="o">.</span><span class="n">first_valid_index</span><span class="p">(),</span><span class="n">df</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">(),</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;DEWP&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span><span class="n">pad</span><span class="o">*</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;ATMP&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()])</span>
<span class="n">ax3b</span><span class="o">.</span><span class="n">axis</span><span class="p">([</span><span class="n">df</span><span class="o">.</span><span class="n">first_valid_index</span><span class="p">(),</span><span class="n">df</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">(),</span><span class="mi">32</span><span class="p">,</span><span class="n">pad</span><span class="o">*</span><span class="mi">9</span><span class="o">*</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;ATMP&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">/</span><span class="mi">5</span> <span class="o">+</span><span class="mi">32</span><span class="p">])</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;DEWP&#39;</span><span class="p">],</span>  
         <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
         <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span>
         <span class="n">label</span><span class="o">=</span><span class="s1">&#39;DEWP&#39;</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;WTMP&#39;</span><span class="p">],</span>  
         <span class="n">linewidth</span><span class="o">=</span><span class="mf">1.2</span><span class="p">,</span>
         <span class="n">color</span><span class="o">=</span><span class="s1">&#39;teal&#39;</span><span class="p">,</span>
         <span class="n">label</span><span class="o">=</span><span class="s1">&#39;WTMP&#39;</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;ATMP&#39;</span><span class="p">],</span> 
         <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>
         <span class="n">color</span><span class="o">=</span><span class="s1">&#39;cornflowerblue&#39;</span><span class="p">,</span>
         <span class="n">label</span><span class="o">=</span><span class="s1">&#39;ATMP&#39;</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Temperature [degC]&#39;</span><span class="p">)</span>
<span class="n">ax3b</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Temperature [degF]&#39;</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper right&#39;</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Air and Water Temperature&#39;</span><span class="p">)</span>

<span class="n">ax4</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span> <span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">first_valid_index</span><span class="p">(),</span><span class="n">df</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">(),</span><span class="mi">0</span><span class="p">,</span><span class="n">pad</span><span class="o">*</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;WVHT&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()])</span>
<span class="n">ax4b</span><span class="o">.</span><span class="n">axis</span><span class="p">([</span><span class="n">df</span><span class="o">.</span><span class="n">first_valid_index</span><span class="p">(),</span><span class="n">df</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">(),</span><span class="mi">0</span><span class="p">,</span><span class="n">pad</span><span class="o">*</span><span class="mf">3.28</span><span class="o">*</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;WVHT&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()])</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;WVHT&#39;</span><span class="p">],</span>  
         <span class="n">linewidth</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span>
         <span class="n">color</span><span class="o">=</span><span class="s1">&#39;teal&#39;</span><span class="p">,</span>
         <span class="n">label</span><span class="o">=</span><span class="s1">&#39;WVHT&#39;</span><span class="p">)</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Wave Height [m]&#39;</span><span class="p">)</span>
<span class="n">ax4b</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Wave Height [ft]&#39;</span><span class="p">)</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper right&#39;</span><span class="p">)</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Time (UTC)&#39;</span><span class="p">)</span>

<span class="c1">#plt.savefig(&#39;images/buoyplots.pdf&#39;)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/0384176615426daf5f1c1d409edcb8f451ef44a22b95239f9f6111a35bd8197d.png" src="../../_images/0384176615426daf5f1c1d409edcb8f451ef44a22b95239f9f6111a35bd8197d.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># From the example scripts in https://windrose.readthedocs.io/en/latest/usage.html</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">windrose</span><span class="w"> </span><span class="kn">import</span> <span class="n">WindroseAxes</span><span class="p">,</span> <span class="n">plot_windrose</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">seaborn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sns</span>

<span class="k">def</span><span class="w"> </span><span class="nf">plot_windrose_subplots</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">direction</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;wrapper function to create subplots per axis&quot;&quot;&quot;</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">WindroseAxes</span><span class="o">.</span><span class="n">from_ax</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
    <span class="n">plot_windrose</span><span class="p">(</span><span class="n">direction_or_df</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="n">direction</span><span class="p">],</span> <span class="n">var</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="n">var</span><span class="p">],</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;MM&#39;</span><span class="p">:</span> <span class="s1">&#39;month&#39;</span><span class="p">})</span>

<span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">FacetGrid</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
    <span class="c1"># the column name for each level a subplot should be created</span>
    <span class="n">col</span><span class="o">=</span><span class="s2">&quot;month&quot;</span><span class="p">,</span>
    <span class="c1"># place a maximum of 3 plots per row</span>
    <span class="n">col_wrap</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
    <span class="n">subplot_kws</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;projection&quot;</span><span class="p">:</span> <span class="s2">&quot;windrose&quot;</span><span class="p">},</span>
    <span class="n">sharex</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">sharey</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">despine</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="mf">3.5</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">g</span><span class="o">.</span><span class="n">map_dataframe</span><span class="p">(</span>
    <span class="n">plot_windrose_subplots</span><span class="p">,</span>
    <span class="n">direction</span><span class="o">=</span><span class="s2">&quot;WDIR&quot;</span><span class="p">,</span>
    <span class="n">var</span><span class="o">=</span><span class="s2">&quot;WSPD&quot;</span><span class="p">,</span>
    <span class="n">normed</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="c1"># manually set bins, so they match for each subplot</span>
    <span class="n">bins</span><span class="o">=</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
    <span class="n">calm_limit</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
    <span class="n">kind</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># make the subplots easier to compare, by having the same y-axis range</span>
<span class="n">y_ticks</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">axes</span><span class="p">:</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_legend</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;$m \cdot s^{-1}$&quot;</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">1.15</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">),</span> <span class="n">loc</span><span class="o">=</span><span class="s2">&quot;lower right&quot;</span>
    <span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_rgrids</span><span class="p">(</span><span class="n">y_ticks</span><span class="p">,</span> <span class="n">y_ticks</span><span class="p">)</span>

<span class="c1"># adjust the spacing between the subplots to have sufficient space between plots</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">wspace</span><span class="o">=-</span><span class="mf">0.2</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">StationName</span> <span class="o">+</span> <span class="s2">&quot; (45174)&quot;</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="mf">1.02</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.02, &#39;Wilmette Buoy, IL (45174)&#39;)
</pre></div>
</div>
<img alt="../../_images/53f75abf45d649a2b2cdabaec1dc7eb4533422bf7ab5025f8aa9e4994dc152d9.png" src="../../_images/53f75abf45d649a2b2cdabaec1dc7eb4533422bf7ab5025f8aa9e4994dc152d9.png" />
</div>
</div>
<p>Historical Radiation Data</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">get_hrdata</span><span class="p">(</span><span class="n">station</span><span class="p">,</span><span class="n">year</span><span class="p">):</span>
    
    <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://www.ndbc.noaa.gov/data/historical/srad/&#39;</span> <span class="o">+</span> <span class="n">station</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;r&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">year</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.txt.gz&#39;</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">sep</span> <span class="o">=</span> <span class="s2">&quot;\s+&quot;</span><span class="p">,</span><span class="n">compression</span><span class="o">=</span><span class="s1">&#39;gzip&#39;</span><span class="p">,</span><span class="n">low_memory</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
  
    <span class="c1"># Wrangle the Buoy Data</span>
    <span class="n">units</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1"># Set the column types</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;#YY&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;#YY&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;MM&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;MM&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;DD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;DD&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;hh&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;hh&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;mm&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;mm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;SRAD1&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;SRAD1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;SRAD1&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;SWRAD&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;SWRAD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;SWRAD&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;LWRAD&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;LWRAD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;LWRAD&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>

    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;datetime&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;#YY&#39;</span><span class="p">],</span> <span class="n">month</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">MM</span><span class="p">,</span>  <span class="n">day</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">DD</span><span class="p">,</span> <span class="n">hour</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">hh</span><span class="p">,</span> <span class="n">minute</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">mm</span><span class="p">))</span>
    <span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># NDBC uses these numerical values to indicate that no data was taken</span>

    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;SRAD1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;SRAD1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">({</span><span class="mf">9999.0</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">})</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;SWRAD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;SWRAD&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">({</span><span class="mf">9999.0</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">})</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;LWRAD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;LWRAD&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">({</span><span class="mf">9999.0</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">})</span>
    
    <span class="k">return</span> <span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">get_hrdata</span><span class="p">(</span><span class="s1">&#39;OKSI2&#39;</span><span class="p">,</span><span class="mi">2023</span><span class="p">)</span> 
<span class="n">StationName</span> <span class="o">=</span> <span class="n">slm_buoys</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">slm_buoys</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;oksi2&#39;</span><span class="p">,</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">StationName</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ndbc.noaa.gov/data/historical/srad/oksi2r2023.txt.gz
Oak St., Chicago, IL
                      #YY  MM  DD  hh  mm  SRAD1  SWRAD  LWRAD
datetime                                                      
2023-01-01 00:00:00  2023   1   1   0   0    2.0    NaN    NaN
2023-01-01 01:00:00  2023   1   1   1   0    2.0    NaN    NaN
2023-01-01 02:00:00  2023   1   1   2   0    2.0    NaN    NaN
2023-01-01 03:00:00  2023   1   1   3   0    2.0    NaN    NaN
2023-01-01 04:00:00  2023   1   1   4   0    2.0    NaN    NaN
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.colors</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">mcolors</span>

<span class="n">pad</span> <span class="o">=</span> <span class="mf">1.01</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="n">constrained_layout</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">StationName</span> <span class="o">+</span> <span class="s2">&quot; (OKSI2)&quot;</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="mf">1.02</span><span class="p">)</span>

<span class="n">ax1</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">axis</span><span class="p">([</span><span class="n">df</span><span class="o">.</span><span class="n">first_valid_index</span><span class="p">(),</span><span class="n">df</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">(),</span><span class="mi">0</span><span class="p">,</span><span class="n">pad</span><span class="o">*</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;SRAD1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()])</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;SRAD1&#39;</span><span class="p">],</span> 
         <span class="n">color</span><span class="o">=</span><span class="n">mcolors</span><span class="o">.</span><span class="n">CSS4_COLORS</span><span class="p">[</span><span class="s1">&#39;darkorange&#39;</span><span class="p">],</span>
         <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">,</span>
         <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span>
         <span class="n">markersize</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
         <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Solar Radiation (W/m$</span><span class="si">{}</span><span class="s1">^2$)&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Time (UTC)&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Solar Radiation&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/51fdc291b91f26bfa949e52d8b8032c0d22256a490a303ac5d70b615ec3f6e31.png" src="../../_images/51fdc291b91f26bfa949e52d8b8032c0d22256a490a303ac5d70b615ec3f6e31.png" />
</div>
</div>
</section>
<section id="python-apis-for-the-ndbc">
<h2>Python APIs for the NDBC<a class="headerlink" href="#python-apis-for-the-ndbc" title="Link to this heading">#</a></h2>
<p>Thare are several python packages that serve as APIs for the NBDC including:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://unidata.github.io/siphon/latest/examples/ndbc/buoy_type_request.html">Siphon</a> a collection of Python utilities for downloading data from remote data services. These
<a class="reference external" href="https://www.unidata.ucar.edu/">unidata</a> packages have good search functions. Data retrieval currently seems to be implemented only for realtime data. Unidata is a <a class="reference external" href="https://www.ucar.edu/who-we-are">UCAR</a> community program.
See also</p>
<ul>
<li><p>Nested</p></li>
<li><p><a class="reference external" href="https://notebook.community/ocefpaf/notebooks_demos/notebooks/staged_noteooks/SIPHON_NCSS_HFR_DataAccess">Using Siphon to query the NetCDF Subset Service</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://github.com/cdjellen/ndbc-api">ndbc-api</a>, this Github also contains <a class="reference external" href="https://github.com/CDJellen/ndbc-api/blob/main/notebooks/overview.ipynb">Example Notebook</a>. ndbc-api also has a <a class="reference external" href="https://pypi.org/project/ndbc-api/">PyPi Repository</a>. The station search methods in ndbc_api return very incomplete results. In particular, as of February 2024, the stations() method currently returns 146  out of 1323 stations, and nearest_station() method seems restricted to that subset.  The ndbc_api methods which access station data and metadata seem to work for the complete set of buoy’s provided you have the five digit station identifier. Those methods are.</p>
<ul>
<li><p>station() which returns station metadata</p></li>
<li><p>available_realtime() which can return data from the last 45 days</p></li>
<li><p>available_historical() which returns older data.</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://pypi.org/project/NDBC/">NDBC</a> A pacakge to simplify to retrieval and parsing of NOAA NDBC data.</p></li>
<li><p><a class="reference external" href="https://www.seebuoy.com">seebuoy</a> Easily access real time and historical data from the National Data Buoy Center.</p>
<ul>
<li><p><a class="reference external" href="https://github.com/nickc1/seebuoy">GitHub</a></p></li>
</ul>
</li>
</ul>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./notebooks/external-datasets"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../quicklooks/surface-map.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Plot Station Maps Combining CROCUS and NOAA Data</p>
      </div>
    </a>
    <a class="right-next"
       href="../crocus_level1_node/vaisala_wxt536.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Read Data from a Vaisala WXT536</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#southern-lake-michigan-buoys">Southern Lake Michigan Buoys</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exploring-the-ndbc-with-python">Exploring the NDBC with Python</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#active-stations">Active stations</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Southern Lake Michigan Buoys</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#realtime-meteorological-data">Realtime Meteorological Data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#realtime-data-for-the-harrison-dever-crib-chii2">Realtime data for the Harrison-Dever Crib (CHII2)</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#historial-ndbc-data">Historial NDBC Data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#python-apis-for-the-ndbc">Python APIs for the NDBC</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By CROCUS Measurement Strategy Team
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>